<section class="services-area ptb-100 bg-gray">
    <div class="container">
        <app-alert class="row mt-1 pt-1"></app-alert>
        <div fxLayout="row" fxLayout.sm="column" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="2%">
            <div fxLayout fxLayoutAlign="center center" class="filter-header">
                My Timesheets
            </div>
        </div>
        <div class="mt-1 pt-1">
            <mat-tab-group [(selectedIndex)]="selectedIndex">
                <mat-tab label="Timesheet Drafts">
                    <div class="single-services">
                        <div class="row">
                            <div class="icon pr-2 mr-2 mb-1 pb-1">
                                <i class="icofont-clock-time"></i>
                            </div>
                            <div><h3>My Drafts</h3></div>
                        </div>
                        <div class="row action-buttons"><a routerLink="/add-my-draft" [queryParams]="{contractorid:contractorId}" class="btn btn-sm btn-success mb-2 p-3"><i class="icofont-meeting-add"></i> Add Draft</a></div>
                        <div *ngIf="myDrafts.data.length > 0; then hasDraftBlock else noDraftBlock" class="timesheet_grid"></div>
                        <ng-template #noDraftBlock><div class="timesheet-container alert alert-danger text-center">No Draft Found</div></ng-template>
                        <ng-template #hasDraftBlock>
                            <!-- <mat-form-field>
                                <input
                                  matInput
                                  (keyup)="applyFilterOne($event.target.value)"
                                  placeholder="Search"
                                />
                            </mat-form-field> -->
                            <div class="timesheet-container mat-elevation-z8">
                                <table mat-table [dataSource]="myDrafts" matSort #table1>
                                    <ng-container matColumnDef="weekEnding" sticky>
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Week Ending</th>
                                        <td mat-cell *matCellDef="let draft"><a routerLink="" (click)="navigateToDraftDetail(draft)"><span class="nav-link">{{draft.weekEnding | date: 'MM/dd/yyyy'}}</span></a></td>
                                    </ng-container>
                                
                                    <ng-container matColumnDef="client">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Client</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.clientName}}</td>
                                    </ng-container>
                
                                    <ng-container matColumnDef="location">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Location</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.location}}</td>
                                    </ng-container>
                
                                    <ng-container matColumnDef="projectName">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Reason</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.projectName}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="mondayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Monday Hours</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.mondayHours | number:'1.2-2'}}</td>
                                    </ng-container>
                
                                    <ng-container matColumnDef="tuesdayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Tuesday Hours</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.tuesdayHours | number:'1.2-2'}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="wednesdayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Wednesday Hours</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.wednesdayHours | number:'1.2-2'}}</td>
                                    </ng-container>
                
                                    <ng-container matColumnDef="thursdayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Thursday Hours</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.thursdayHours | number:'1.2-2'}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="fridayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Friday Hours</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.fridayHours | number:'1.2-2'}}</td>
                                    </ng-container>
                
                                    <ng-container matColumnDef="saturdayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Saturday Hours</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.saturdayHours | number:'1.2-2'}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="sundayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Sunday Hours</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.sundayHours | number:'1.2-2'}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="weeklyHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Weekly Hours</th>
                                        <td mat-cell *matCellDef="let draft">{{draft.weeklyHours | number:'1.2-2'}}</td>
                                    </ng-container>
                                    <tr mat-header-row *matHeaderRowDef="displayedDraftColumns; sticky: true"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedDraftColumns;"></tr>
                                </table>
                            </div>                      
                        </ng-template>
                        <mat-paginator #TableOnePaginator="matPaginator" [pageSize]="10" [pageSizeOptions]="[10, 25, 50, 100]" showFirstLastButtons> 
                        </mat-paginator>
                    </div>
                </mat-tab>
                <mat-tab label="Submitted Timesheets">
                    <div class="single-services">
                        <div class="row">
                            <div class="icon pr-2 mr-2 mb-1 pb-1">
                                <i class="icofont-list"></i>
                            </div>
                            <div><h3>Submitted Timesheets</h3></div>
                        </div>
                        <div class="row action-buttons"><a routerLink="/add-my-timesheet" [queryParams]="{contractorid:contractorId}" class="btn btn-sm btn-success mb-2 p-3"><i class="icofont-plus"></i> Add Timesheet</a></div>
                        <div *ngIf="myTimesheets.data.length > 0; then hasTimesheetBlock else noTimesheetBlock" class="timesheet_grid"></div>
                        <ng-template #noTimesheetBlock>
                            <div class="timesheet-container alert alert-danger text-center">No Timesheet Found</div>
                        </ng-template>
                        <ng-template #hasTimesheetBlock>
                            <div class="timesheet-container mat-elevation-z8">
                                <table mat-table [dataSource]="myTimesheets" matSort #table2>
                                    <ng-container matColumnDef="weekEnding" sticky>
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Week Ending</th>
                                        <td mat-cell *matCellDef="let timesheet"><a routerLink="" (click)="navigateToTimesheetDetail(timesheet)"><span class="nav-link">{{timesheet.weekEnding | date: 'MM/dd/yyyy'}}</span></a></td>
                                    </ng-container>
                                
                                    <ng-container matColumnDef="client">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Client</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.clientName}}</td>
                                    </ng-container>
                
                                    <ng-container matColumnDef="location">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Location</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.location}}</td>
                                    </ng-container>
                
                                    <ng-container matColumnDef="projectName">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Reason</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.projectName}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="mondayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Monday Hours</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.mondayHours | number:'1.2-2'}}</td>
                                    </ng-container>
                
                                    <ng-container matColumnDef="tuesdayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Tuesday Hours</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.tuesdayHours | number:'1.2-2'}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="wednesdayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Wednesday Hours</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.wednesdayHours | number:'1.2-2'}}</td>
                                    </ng-container>
                
                                    <ng-container matColumnDef="thursdayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Thursday Hours</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.thursdayHours | number:'1.2-2'}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="fridayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Friday Hours</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.fridayHours | number:'1.2-2'}}</td>
                                    </ng-container>
                
                                    <ng-container matColumnDef="saturdayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Saturday Hours</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.saturdayHours | number:'1.2-2'}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="sundayHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Sunday Hours</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.sundayHours | number:'1.2-2'}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="weeklyHours">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Weekly Hours</th>
                                        <td mat-cell *matCellDef="let timesheet">{{timesheet.weeklyHours | number:'1.2-2'}}</td>
                                    </ng-container>

                                    <ng-container matColumnDef="status" hidden>
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
                                        <td mat-cell *matCellDef="let timesheet" [style.color]="timesheet.timesheetStatus == 'Rejected' ? 'red' : ''">{{timesheet.timesheetStatus}}</td>
                                    </ng-container>
                                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                </table>
                            </div>                         
                        </ng-template>
                        <mat-paginator #TableTwoPaginator="matPaginator" [pageSize]="10" [pageSizeOptions]="[10, 25, 50, 100]" showFirstLastButtons>
                        </mat-paginator>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </div>
    </div>
</section>
